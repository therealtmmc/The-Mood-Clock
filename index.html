<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mood City</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
<style>
:root {
    --bg: #f7f0ff;
    --card: #ffffff;
    --primary: #7b5cff;
    --secondary: #ffd700;
    --text: #333;
    --muted: #777;
}

body {
    margin: 0;
    font-family: 'Montserrat', sans-serif;
    background: linear-gradient(135deg, #d4c1ff, #f7f0ff);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

.card {
    background: var(--card);
    border-radius: 20px;
    width: 400px;
    padding: 32px;
    box-shadow: 0 20px 50px rgba(0,0,0,0.1);
    text-align: center;
}

h1 {
    color: var(--primary);
    margin-bottom: 16px;
}

input, button {
    width: 100%;
    padding: 12px 16px;
    margin-bottom: 14px;
    border-radius: 12px;
    border: none;
    font-size: 14px;
}

input {
    border: 1px solid #ccc;
}

button {
    background: var(--primary);
    color: white;
    font-weight: bold;
    cursor: pointer;
    transition: 0.2s;
}

button:hover {
    background: #5d3ccc;
}

/* Sections */
.section {
    display: none;
    margin-top: 18px;
    text-align: left;
}

.code-input {
    letter-spacing: 4px;
    font-weight: bold;
    text-align: center;
}

/* Kahoot style */
.kahoot-btn {
    background: var(--secondary);
    color: #333;
    font-weight: bold;
    margin-top: 10px;
}
</style>
</head>
<body>

<div class="card" id="loginCard">
    <h1>Mood Kahoot</h1>

    <!-- Step 1: Email input -->
    <div id="emailStep">
        <input type="email" id="emailInput" placeholder="Enter your Gmail" required>
        <button id="sendCodeBtn">Send Verification Code</button>
        <p id="emailMsg" style="color:red;font-size:12px;"></p>
    </div>

    <!-- Step 2: Code verification -->
    <div id="codeStep" style="display:none;">
        <input type="text" id="codeInput" placeholder="Enter code" class="code-input">
        <button id="verifyCodeBtn">Verify</button>
        <p id="codeMsg" style="color:red;font-size:12px;"></p>
    </div>

    <!-- Step 3: Password setup -->
    <div id="passwordStep" style="display:none;">
        <input type="password" id="passwordInput" placeholder="Create a password">
        <button id="createPassBtn">Set Password</button>
        <p id="passMsg" style="color:red;font-size:12px;"></p>
    </div>
</div>

<div class="card" id="homeCard" style="display:none;">
    <h1>Welcome, <span id="userEmail"></span>!</h1>
    <button class="kahoot-btn" id="moodHourBtn">Mood Hour</button>
    <button class="kahoot-btn" id="howAreYouBtn">How Are You Quiz</button>
    <button class="kahoot-btn" id="moodExpressBtn">Mood Express</button>
    <button class="kahoot-btn" id="moodDecisionBtn">Mood Decision</button>
</div>

<script>
/* ======= State ======= */
let currentEmail = "";
let verificationCode = "";

/* ======= Elements ======= */
const emailStep = document.getElementById("emailStep");
const codeStep = document.getElementById("codeStep");
const passwordStep = document.getElementById("passwordStep");
const loginCard = document.getElementById("loginCard");
const homeCard = document.getElementById("homeCard");
const userEmailSpan = document.getElementById("userEmail");

/* ======= Functions ======= */

// Generates a 6-digit verification code
function generateCode() {
    return Math.floor(100000 + Math.random() * 900000).toString();
}

/* ======= Event Listeners ======= */

// Step 1: Send verification code
document.getElementById("sendCodeBtn").onclick = () => {
    const email = document.getElementById("emailInput").value.trim();
    if (!email.endsWith("@gmail.com")) {
        document.getElementById("emailMsg").textContent = "Please use a Gmail address.";
        return;
    }
    currentEmail = email;
    verificationCode = generateCode();

    // ðŸ”” HERE: You need to send 'verificationCode' to 'currentEmail' using backend/email service
    console.log("Code sent to email:", verificationCode);

    emailStep.style.display = "none";
    codeStep.style.display = "block";
    document.getElementById("emailMsg").textContent = "";
};

// Step 2: Verify code
document.getElementById("verifyCodeBtn").onclick = () => {
    const code = document.getElementById("codeInput").value.trim();
    if (code === verificationCode) {
        codeStep.style.display = "none";
        passwordStep.style.display = "block";
        document.getElementById("codeMsg").textContent = "";
    } else {
        document.getElementById("codeMsg").textContent = "Incorrect code, try again.";
    }
};

// Step 3: Set password
document.getElementById("createPassBtn").onclick = () => {
    const pass = document.getElementById("passwordInput").value.trim();
    if (pass.length < 4) {
        document.getElementById("passMsg").textContent = "Password must be 4+ characters.";
        return;
    }

    // Save user credentials (in real app, send to backend)
    localStorage.setItem(currentEmail, JSON.stringify({ password: pass }));

    // Show home
    loginCard.style.display = "none";
    homeCard.style.display = "block";
    userEmailSpan.textContent = currentEmail;
};
</script>

</body>
</html>
